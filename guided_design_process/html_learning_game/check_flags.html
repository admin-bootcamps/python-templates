<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Flag Grid — Verify CountryFlags.com URLs</title>
  <style>
    :root{--gap:12px;--card-bg:#fff;--muted:#666}
    html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial}
    body{background:#f6f8fb;padding:18px;color:#111}
    header{display:flex;gap:12px;align-items:center;justify-content:space-between;margin-bottom:14px}
    h1{font-size:18px;margin:0}
    .controls{display:flex;gap:8px;align-items:center}
    input[type=search]{padding:8px 10px;border-radius:8px;border:1px solid #ddd;min-width:220px}
    button{padding:8px 10px;border-radius:8px;border:1px solid #ccc;background:#fff;cursor:pointer}
    .stats{font-size:13px;color:var(--muted)}
    main{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:var(--gap)}
    .card{background:var(--card-bg);border-radius:10px;padding:10px;box-shadow:0 2px 6px rgba(20,30,60,0.06);display:flex;flex-direction:column;align-items:center;gap:8px;text-align:center}
    .flag{width:100%;height:110px;object-fit:contain;background:#eef;padding:6px;border-radius:6px}
    .name{font-size:14px;font-weight:600}
    .url{font-size:11px;color:var(--muted);word-break:break-all}
    .broken{outline:3px solid rgba(255,60,60,0.12)}
    .ok{outline:3px solid rgba(34,197,94,0.08)}
    footer{margin-top:14px;font-size:13px;color:var(--muted)}
    @media (max-width:520px){.flag{height:90px}}
  </style>
</head>
<body>
  <header>
    <div>
      <h1>Flag grid — verify CountryFlags.com URLs</h1>
      <div class="stats" id="stats">Loading…</div>
    </div>
    <div class="controls">
      <input id="q" type="search" placeholder="Search country (type to filter)" />
      <button id="showBroken">Show only broken</button>
      <button id="refresh">Re-check images</button>
    </div>
  </header>

  <main id="grid" aria-live="polite"></main>

  <footer>
    Tip: run this file locally (double‑click the HTML) or serve from a simple static server. Images are loaded directly from CountryFlags.com.
  </footer>

  <script>
    // --- DATASET (195 UN countries) ---
    const dataset = [
  {"country": "Afghanistan", "flag": "https://www.countryflags.com/wp-content/uploads/afghanistan-flag-png-large.png"},
  {"country": "Albania", "flag": "https://www.countryflags.com/wp-content/uploads/albania-flag-png-large.png"},
  {"country": "Algeria", "flag": "https://www.countryflags.com/wp-content/uploads/algeria-flag-png-large.png"},
  {"country": "Andorra", "flag": "https://www.countryflags.com/wp-content/uploads/andorra-flag-png-large.png"},
  {"country": "Angola", "flag": "https://www.countryflags.com/wp-content/uploads/angola-flag-png-large.png"},
  {"country": "Antigua and Barbuda", "flag": "https://www.countryflags.com/wp-content/uploads/antigua-and-barbuda-flag-png-large.png"},
  {"country": "Argentina", "flag": "https://www.countryflags.com/wp-content/uploads/argentina-flag-png-large.png"},
  {"country": "Armenia", "flag": "https://www.countryflags.com/wp-content/uploads/armenia-flag-png-large.png"},
  {"country": "Australia", "flag": "https://www.countryflags.com/wp-content/uploads/australia-flag-png-large.png"},
  {"country": "Austria", "flag": "https://www.countryflags.com/wp-content/uploads/austria-flag-png-large.png"},
  {"country": "Azerbaijan", "flag": "https://www.countryflags.com/wp-content/uploads/azerbaijan-flag-png-large.png"},
  {"country": "Bahamas", "flag": "https://www.countryflags.com/wp-content/uploads/bahamas-flag-png-large.png"},
  {"country": "Bahrain", "flag": "https://www.countryflags.com/wp-content/uploads/bahrain-flag-png-large.png"},
  {"country": "Bangladesh", "flag": "https://www.countryflags.com/wp-content/uploads/bangladesh-flag-png-large.png"},
  {"country": "Barbados", "flag": "https://www.countryflags.com/wp-content/uploads/barbados-flag-png-large.png"},
  {"country": "Belarus", "flag": "https://www.countryflags.com/wp-content/uploads/belarus-flag-png-large.png"},
  {"country": "Belgium", "flag": "https://www.countryflags.com/wp-content/uploads/belgium-flag-png-large.png"},
  {"country": "Belize", "flag": "https://www.countryflags.com/wp-content/uploads/belize-flag-png-large.png"},
  {"country": "Benin", "flag": "https://www.countryflags.com/wp-content/uploads/benin-flag-png-large.png"},
  {"country": "Bhutan", "flag": "https://www.countryflags.com/wp-content/uploads/bhutan-flag-png-large.png"},
  {"country": "Bolivia", "flag": "https://www.countryflags.com/wp-content/uploads/bolivia-flag-png-large.png"},
  {"country": "Bosnia and Herzegovina", "flag": "https://www.countryflags.com/wp-content/uploads/bosnia-and-herzegovina-flag-png-large.png"},
  {"country": "Botswana", "flag": "https://www.countryflags.com/wp-content/uploads/botswana-flag-png-large.png"},
  {"country": "Brazil", "flag": "https://www.countryflags.com/wp-content/uploads/brazil-flag-png-large.png"},
  {"country": "Brunei", "flag": "https://www.countryflags.com/wp-content/uploads/brunei-flag-png-large.png"},
  {"country": "Bulgaria", "flag": "https://www.countryflags.com/wp-content/uploads/bulgaria-flag-png-large.png"},
  {"country": "Burkina Faso", "flag": "https://www.countryflags.com/wp-content/uploads/burkina-faso-flag-png-large.png"},
  {"country": "Burundi", "flag": "https://www.countryflags.com/wp-content/uploads/burundi-flag-png-large.png"},
  {"country": "Cabo Verde", "flag": "https://www.countryflags.com/wp-content/uploads/cabo-verde-flag-png-large.png"},
  {"country": "Cambodia", "flag": "https://www.countryflags.com/wp-content/uploads/cambodia-flag-png-large.png"},
  {"country": "Cameroon", "flag": "https://www.countryflags.com/wp-content/uploads/cameroon-flag-png-large.png"},
  {"country": "Canada", "flag": "https://www.countryflags.com/wp-content/uploads/canada-flag-png-large.png"},
  {"country": "Central African Republic", "flag": "https://www.countryflags.com/wp-content/uploads/central-african-republic-flag-png-large.png"},
  {"country": "Chad", "flag": "https://www.countryflags.com/wp-content/uploads/chad-flag-png-large.png"},
  {"country": "Chile", "flag": "https://www.countryflags.com/wp-content/uploads/chile-flag-png-large.png"},
  {"country": "China", "flag": "https://www.countryflags.com/wp-content/uploads/china-flag-png-large.png"},
  {"country": "Colombia", "flag": "https://www.countryflags.com/wp-content/uploads/colombia-flag-png-large.png"},
  {"country": "Comoros", "flag": "https://www.countryflags.com/wp-content/uploads/comoros-flag-png-large.png"},
  {"country": "Congo (Congo-Brazzaville)", "flag": "https://www.countryflags.com/wp-content/uploads/republic-of-the-congo-flag-png-large.png"},
  {"country": "Costa Rica", "flag": "https://www.countryflags.com/wp-content/uploads/costa-rica-flag-png-large.png"},
  {"country": "Croatia", "flag": "https://www.countryflags.com/wp-content/uploads/croatia-flag-png-large.png"},
  {"country": "Cuba", "flag": "https://www.countryflags.com/wp-content/uploads/cuba-flag-png-large.png"},
  {"country": "Cyprus", "flag": "https://www.countryflags.com/wp-content/uploads/cyprus-flag-png-large.png"},
  {"country": "Czechia", "flag": "https://www.countryflags.com/wp-content/uploads/czech-republic-flag-png-large.png"},
  {"country": "Democratic Republic of the Congo", "flag": "https://www.countryflags.com/wp-content/uploads/democratic-republic-of-the-congo-flag-png-large.png"},
  {"country": "Denmark", "flag": "https://www.countryflags.com/wp-content/uploads/denmark-flag-png-large.png"},
  {"country": "Djibouti", "flag": "https://www.countryflags.com/wp-content/uploads/djibouti-flag-png-large.png"},
  {"country": "Dominica", "flag": "https://www.countryflags.com/wp-content/uploads/dominica-flag-png-large.png"},
  {"country": "Dominican Republic", "flag": "https://www.countryflags.com/wp-content/uploads/dominican-republic-flag-png-large.png"},
  {"country": "Ecuador", "flag": "https://www.countryflags.com/wp-content/uploads/ecuador-flag-png-large.png"},
  {"country": "Egypt", "flag": "https://www.countryflags.com/wp-content/uploads/egypt-flag-png-large.png"},
  {"country": "El Salvador", "flag": "https://www.countryflags.com/wp-content/uploads/el-salvador-flag-png-large.png"},
  {"country": "Equatorial Guinea", "flag": "https://www.countryflags.com/wp-content/uploads/equatorial-guinea-flag-png-large.png"},
  {"country": "Eritrea", "flag": "https://www.countryflags.com/wp-content/uploads/eritrea-flag-png-large.png"},
  {"country": "Estonia", "flag": "https://www.countryflags.com/wp-content/uploads/estonia-flag-png-large.png"},
  {"country": "Eswatini", "flag": "https://www.countryflags.com/wp-content/uploads/eswatini-flag-png-large.png"},
  {"country": "Ethiopia", "flag": "https://www.countryflags.com/wp-content/uploads/ethiopia-flag-png-large.png"},
  {"country": "Fiji", "flag": "https://www.countryflags.com/wp-content/uploads/fiji-flag-png-large.png"},
  {"country": "Finland", "flag": "https://www.countryflags.com/wp-content/uploads/finland-flag-png-large.png"},
  {"country": "France", "flag": "https://www.countryflags.com/wp-content/uploads/france-flag-png-large.png"},
  {"country": "Gabon", "flag": "https://www.countryflags.com/wp-content/uploads/gabon-flag-png-large.png"},
  {"country": "Gambia", "flag": "https://www.countryflags.com/wp-content/uploads/gambia-flag-png-large.png"},
  {"country": "Georgia", "flag": "https://www.countryflags.com/wp-content/uploads/georgia-flag-png-large.png"},
  {"country": "Germany", "flag": "https://www.countryflags.com/wp-content/uploads/germany-flag-png-large.png"},
  {"country": "Ghana", "flag": "https://www.countryflags.com/wp-content/uploads/ghana-flag-png-large.png"},
  {"country": "Greece", "flag": "https://www.countryflags.com/wp-content/uploads/greece-flag-png-large.png"},
  {"country": "Grenada", "flag": "https://www.countryflags.com/wp-content/uploads/grenada-flag-png-large.png"},
  {"country": "Guatemala", "flag": "https://www.countryflags.com/wp-content/uploads/guatemala-flag-png-large.png"},
  {"country": "Guinea", "flag": "https://www.countryflags.com/wp-content/uploads/guinea-flag-png-large.png"},
  {"country": "Guinea-Bissau", "flag": "https://www.countryflags.com/wp-content/uploads/guinea-bissau-flag-png-large.png"},
  {"country": "Guyana", "flag": "https://www.countryflags.com/wp-content/uploads/guyana-flag-png-large.png"},
  {"country": "Haiti", "flag": "https://www.countryflags.com/wp-content/uploads/haiti-flag-png-large.png"},
  {"country": "Holy See", "flag": "https://www.countryflags.com/wp-content/uploads/vatican-city-flag-png-large.png"},
  {"country": "Honduras", "flag": "https://www.countryflags.com/wp-content/uploads/honduras-flag-png-large.png"},
  {"country": "Hungary", "flag": "https://www.countryflags.com/wp-content/uploads/hungary-flag-png-large.png"},
  {"country": "Iceland", "flag": "https://www.countryflags.com/wp-content/uploads/iceland-flag-png-large.png"},
  {"country": "India", "flag": "https://www.countryflags.com/wp-content/uploads/india-flag-png-large.png"},
  {"country": "Indonesia", "flag": "https://www.countryflags.com/wp-content/uploads/indonesia-flag-png-large.png"},
  {"country": "Iran", "flag": "https://www.countryflags.com/wp-content/uploads/iran-flag-png-large.png"},
  {"country": "Iraq", "flag": "https://www.countryflags.com/wp-content/uploads/iraq-flag-png-large.png"},
  {"country": "Ireland", "flag": "https://www.countryflags.com/wp-content/uploads/ireland-flag-png-large.png"},
  {"country": "Israel", "flag": "https://www.countryflags.com/wp-content/uploads/israel-flag-png-large.png"},
  {"country": "Italy", "flag": "https://www.countryflags.com/wp-content/uploads/italy-flag-png-large.png"},
  {"country": "Jamaica", "flag": "https://www.countryflags.com/wp-content/uploads/jamaica-flag-png-large.png"},
  {"country": "Japan", "flag": "https://www.countryflags.com/wp-content/uploads/japan-flag-png-large.png"},
  {"country": "Jordan", "flag": "https://www.countryflags.com/wp-content/uploads/jordan-flag-png-large.png"},
  {"country": "Kazakhstan", "flag": "https://www.countryflags.com/wp-content/uploads/kazakhstan-flag-png-large.png"},
  {"country": "Kenya", "flag": "https://www.countryflags.com/wp-content/uploads/kenya-flag-png-large.png"},
  {"country": "Kiribati", "flag": "https://www.countryflags.com/wp-content/uploads/kiribati-flag-png-large.png"},
  {"country": "Kuwait", "flag": "https://www.countryflags.com/wp-content/uploads/kuwait-flag-png-large.png"},
  {"country": "Kyrgyzstan", "flag": "https://www.countryflags.com/wp-content/uploads/kyrgyzstan-flag-png-large.png"},
  {"country": "Laos", "flag": "https://www.countryflags.com/wp-content/uploads/laos-flag-png-large.png"},
  {"country": "Latvia", "flag": "https://www.countryflags.com/wp-content/uploads/latvia-flag-png-large.png"},
  {"country": "Lebanon", "flag": "https://www.countryflags.com/wp-content/uploads/lebanon-flag-png-large.png"},
  {"country": "Lesotho", "flag": "https://www.countryflags.com/wp-content/uploads/lesotho-flag-png-large.png"},
  {"country": "Liberia", "flag": "https://www.countryflags.com/wp-content/uploads/liberia-flag-png-large.png"},
  {"country": "Libya", "flag": "https://www.countryflags.com/wp-content/uploads/libya-flag-png-large.png"},
  {"country": "Liechtenstein", "flag": "https://www.countryflags.com/wp-content/uploads/liechtenstein-flag-png-large.png"},
  {"country": "Lithuania", "flag": "https://www.countryflags.com/wp-content/uploads/lithuania-flag-png-large.png"},
  {"country": "Luxembourg", "flag": "https://www.countryflags.com/wp-content/uploads/luxembourg-flag-png-large.png"},
  {"country": "Madagascar", "flag": "https://www.countryflags.com/wp-content/uploads/madagascar-flag-png-large.png"},
  {"country": "Malawi", "flag": "https://www.countryflags.com/wp-content/uploads/malawi-flag-png-large.png"},
  {"country": "Malaysia", "flag": "https://www.countryflags.com/wp-content/uploads/malaysia-flag-png-large.png"},
  {"country": "Maldives", "flag": "https://www.countryflags.com/wp-content/uploads/maldives-flag-png-large.png"},
  {"country": "Mali", "flag": "https://www.countryflags.com/wp-content/uploads/mali-flag-png-large.png"},
  {"country": "Malta", "flag": "https://www.countryflags.com/wp-content/uploads/malta-flag-png-large.png"},
  {"country": "Marshall Islands", "flag": "https://www.countryflags.com/wp-content/uploads/marshall-islands-flag-png-large.png"},
  {"country": "Mauritania", "flag": "https://www.countryflags.com/wp-content/uploads/mauritania-flag-png-large.png"},
  {"country": "Mauritius", "flag": "https://www.countryflags.com/wp-content/uploads/mauritius-flag-png-large.png"},
  {"country": "Mexico", "flag": "https://www.countryflags.com/wp-content/uploads/mexico-flag-png-large.png"},
  {"country": "Micronesia", "flag": "https://www.countryflags.com/wp-content/uploads/micronesia-flag-png-large.png"},
  {"country": "Moldova", "flag": "https://www.countryflags.com/wp-content/uploads/moldova-flag-png-large.png"},
  {"country": "Monaco", "flag": "https://www.countryflags.com/wp-content/uploads/monaco-flag-png-large.png"},
  {"country": "Mongolia", "flag": "https://www.countryflags.com/wp-content/uploads/mongolia-flag-png-large.png"},
  {"country": "Montenegro", "flag": "https://www.countryflags.com/wp-content/uploads/montenegro-flag-png-large.png"},
  {"country": "Morocco", "flag": "https://www.countryflags.com/wp-content/uploads/morocco-flag-png-large.png"},
  {"country": "Mozambique", "flag": "https://www.countryflags.com/wp-content/uploads/mozambique-flag-png-large.png"},
  {"country": "Myanmar", "flag": "https://www.countryflags.com/wp-content/uploads/myanmar-flag-png-large.png"},
  {"country": "Namibia", "flag": "https://www.countryflags.com/wp-content/uploads/namibia-flag-png-large.png"},
  {"country": "Nauru", "flag": "https://www.countryflags.com/wp-content/uploads/nauru-flag-png-large.png"},
  {"country": "Nepal", "flag": "https://www.countryflags.com/wp-content/uploads/nepal-flag-png-large.png"},
  {"country": "Netherlands", "flag": "https://www.countryflags.com/wp-content/uploads/netherlands-flag-png-large.png"},
  {"country": "New Zealand", "flag": "https://www.countryflags.com/wp-content/uploads/new-zealand-flag-png-large.png"},
  {"country": "Nicaragua", "flag": "https://www.countryflags.com/wp-content/uploads/nicaragua-flag-png-large.png"},
  {"country": "Niger", "flag": "https://www.countryflags.com/wp-content/uploads/niger-flag-png-large.png"},
  {"country": "Nigeria", "flag": "https://www.countryflags.com/wp-content/uploads/nigeria-flag-png-large.png"},
  {"country": "North Korea", "flag": "https://www.countryflags.com/wp-content/uploads/north-korea-flag-png-large.png"},
  {"country": "North Macedonia", "flag": "https://www.countryflags.com/wp-content/uploads/north-macedonia-flag-png-large.png"},
  {"country": "Norway", "flag": "https://www.countryflags.com/wp-content/uploads/norway-flag-png-large.png"},
  {"country": "Oman", "flag": "https://www.countryflags.com/wp-content/uploads/oman-flag-png-large.png"},
  {"country": "Pakistan", "flag": "https://www.countryflags.com/wp-content/uploads/pakistan-flag-png-large.png"},
  {"country": "Palau", "flag": "https://www.countryflags.com/wp-content/uploads/palau-flag-png-large.png"},
  {"country": "Palestine", "flag": "https://www.countryflags.com/wp-content/uploads/palestine-flag-png-large.png"},
  {"country": "Panama", "flag": "https://www.countryflags.com/wp-content/uploads/panama-flag-png-large.png"},
  {"country": "Papua New Guinea", "flag": "https://www.countryflags.com/wp-content/uploads/papua-new-guinea-flag-png-large.png"},
  {"country": "Paraguay", "flag": "https://www.countryflags.com/wp-content/uploads/paraguay-flag-png-large.png"},
  {"country": "Peru", "flag": "https://www.countryflags.com/wp-content/uploads/peru-flag-png-large.png"},
  {"country": "Philippines", "flag": "https://www.countryflags.com/wp-content/uploads/philippines-flag-png-large.png"},
  {"country": "Poland", "flag": "https://www.countryflags.com/wp-content/uploads/poland-flag-png-large.png"},
  {"country": "Portugal", "flag": "https://www.countryflags.com/wp-content/uploads/portugal-flag-png-large.png"},
  {"country": "Qatar", "flag": "https://www.countryflags.com/wp-content/uploads/qatar-flag-png-large.png"},
  {"country": "Romania", "flag": "https://www.countryflags.com/wp-content/uploads/romania-flag-png-large.png"},
  {"country": "Russia", "flag": "https://www.countryflags.com/wp-content/uploads/russia-flag-png-large.png"},
  {"country": "Rwanda", "flag": "https://www.countryflags.com/wp-content/uploads/rwanda-flag-png-large.png"},
  {"country": "Saint Kitts and Nevis", "flag": "https://www.countryflags.com/wp-content/uploads/saint-kitts-and-nevis-flag-png-large.png"},
  {"country": "Saint Lucia", "flag": "https://www.countryflags.com/wp-content/uploads/saint-lucia-flag-png-large.png"},
  {"country": "Saint Vincent and the Grenadines", "flag": "https://www.countryflags.com/wp-content/uploads/saint-vincent-and-the-grenadines-flag-png-large.png"},
  {"country": "Samoa", "flag": "https://www.countryflags.com/wp-content/uploads/samoa-flag-png-large.png"},
  {"country": "San Marino", "flag": "https://www.countryflags.com/wp-content/uploads/san-marino-flag-png-large.png"},
  {"country": "Sao Tome and Principe", "flag": "https://www.countryflags.com/wp-content/uploads/sao-tome-and-principe-flag-png-large.png"},
  {"country": "Saudi Arabia", "flag": "https://www.countryflags.com/wp-content/uploads/saudi-arabia-flag-png-large.png"},
  {"country": "Senegal", "flag": "https://www.countryflags.com/wp-content/uploads/senegal-flag-png-large.png"},
  {"country": "Serbia", "flag": "https://www.countryflags.com/wp-content/uploads/serbia-flag-png-large.png"},
  {"country": "Seychelles", "flag": "https://www.countryflags.com/wp-content/uploads/seychelles-flag-png-large.png"},
  {"country": "Sierra Leone", "flag": "https://www.countryflags.com/wp-content/uploads/sierra-leone-flag-png-large.png"},
  {"country": "Singapore", "flag": "https://www.countryflags.com/wp-content/uploads/singapore-flag-png-large.png"},
  {"country": "Slovakia", "flag": "https://www.countryflags.com/wp-content/uploads/slovakia-flag-png-large.png"},
  {"country": "Slovenia", "flag": "https://www.countryflags.com/wp-content/uploads/slovenia-flag-png-large.png"},
  {"country": "Solomon Islands", "flag": "https://www.countryflags.com/wp-content/uploads/solomon-islands-flag-png-large.png"},
  {"country": "Somalia", "flag": "https://www.countryflags.com/wp-content/uploads/somalia-flag-png-large.png"},
  {"country": "South Africa", "flag": "https://www.countryflags.com/wp-content/uploads/south-africa-flag-png-large.png"},
  {"country": "South Korea", "flag": "https://www.countryflags.com/wp-content/uploads/south-korea-flag-png-large.png"},
  {"country": "South Sudan", "flag": "https://www.countryflags.com/wp-content/uploads/south-sudan-flag-png-large.png"},
  {"country": "Spain", "flag": "https://www.countryflags.com/wp-content/uploads/spain-flag-png-large.png"},
  {"country": "Sri Lanka", "flag": "https://www.countryflags.com/wp-content/uploads/sri-lanka-flag-png-large.png"},
  {"country": "Sudan", "flag": "https://www.countryflags.com/wp-content/uploads/sudan-flag-png-large.png"},
  {"country": "Suriname", "flag": "https://www.countryflags.com/wp-content/uploads/suriname-flag-png-large.png"},
  {"country": "Sweden", "flag": "https://www.countryflags.com/wp-content/uploads/sweden-flag-png-large.png"},
  {"country": "Switzerland", "flag": "https://www.countryflags.com/wp-content/uploads/switzerland-flag-png-large.png"},
  {"country": "Syria", "flag": "https://www.countryflags.com/wp-content/uploads/syria-flag-png-large.png"},
  {"country": "Tajikistan", "flag": "https://www.countryflags.com/wp-content/uploads/tajikistan-flag-png-large.png"},
  {"country": "Tanzania", "flag": "https://www.countryflags.com/wp-content/uploads/tanzania-flag-png-large.png"},
  {"country": "Thailand", "flag": "https://www.countryflags.com/wp-content/uploads/thailand-flag-png-large.png"},
  {"country": "Timor-Leste", "flag": "https://www.countryflags.com/wp-content/uploads/timor-leste-flag-png-large.png"},
  {"country": "Togo", "flag": "https://www.countryflags.com/wp-content/uploads/togo-flag-png-large.png"},
  {"country": "Tonga", "flag": "https://www.countryflags.com/wp-content/uploads/tonga-flag-png-large.png"},
  {"country": "Trinidad and Tobago", "flag": "https://www.countryflags.com/wp-content/uploads/trinidad-and-tobago-flag-png-large.png"},
  {"country": "Tunisia", "flag": "https://www.countryflags.com/wp-content/uploads/tunisia-flag-png-large.png"},
  {"country": "Turkey", "flag": "https://www.countryflags.com/wp-content/uploads/turkey-flag-png-large.png"},
  {"country": "Turkmenistan", "flag": "https://www.countryflags.com/wp-content/uploads/turkmenistan-flag-png-large.png"},
  {"country": "Tuvalu", "flag": "https://www.countryflags.com/wp-content/uploads/tuvalu-flag-png-large.png"},
  {"country": "Uganda", "flag": "https://www.countryflags.com/wp-content/uploads/uganda-flag-png-large.png"},
  {"country": "Ukraine", "flag": "https://www.countryflags.com/wp-content/uploads/ukraine-flag-png-large.png"},
  {"country": "United Arab Emirates", "flag": "https://www.countryflags.com/wp-content/uploads/united-arab-emirates-flag-png-large.png"},
  {"country": "United Kingdom", "flag": "https://www.countryflags.com/wp-content/uploads/united-kingdom-flag-png-large.png"},
  {"country": "United States", "flag": "https://www.countryflags.com/wp-content/uploads/united-states-of-america-flag-png-large.png"},
  {"country": "Uruguay", "flag": "https://www.countryflags.com/wp-content/uploads/uruguay-flag-png-large.png"},
  {"country": "Uzbekistan", "flag": "https://www.countryflags.com/wp-content/uploads/uzbekistan-flag-png-large.png"},
  {"country": "Vanuatu", "flag": "https://www.countryflags.com/wp-content/uploads/vanuatu-flag-png-large.png"},
  {"country": "Venezuela", "flag": "https://www.countryflags.com/wp-content/uploads/venezuela-flag-png-large.png"},
  {"country": "Vietnam", "flag": "https://www.countryflags.com/wp-content/uploads/vietnam-flag-png-large.png"},
  {"country": "Yemen", "flag": "https://www.countryflags.com/wp-content/uploads/yemen-flag-png-large.png"},
  {"country": "Zambia", "flag": "https://www.countryflags.com/wp-content/uploads/zambia-flag-png-large.png"},
  {"country": "Zimbabwe", "flag": "https://www.countryflags.com/wp-content/uploads/zimbabwe-flag-png-large.png"}
];
    // --- end dataset ---

    const grid = document.getElementById('grid');
    const stats = document.getElementById('stats');
    const q = document.getElementById('q');
    const showBrokenBtn = document.getElementById('showBroken');
    const refreshBtn = document.getElementById('refresh');

    let cards = [];

    function renderList(list){
      grid.innerHTML = '';
      cards = list.map(item => createCard(item));
      cards.forEach(c=>grid.appendChild(c.el));
      updateStats();
    }

    function createCard(item){
      const el = document.createElement('article');
      el.className = 'card';

      const img = document.createElement('img');
      img.className = 'flag';
      img.alt = item.country + ' flag';
      img.loading = 'lazy';
      img.src = item.flag;

      const name = document.createElement('div');
      name.className = 'name';
      name.textContent = item.country;

      const url = document.createElement('div');
      url.className = 'url';
      url.textContent = item.flag;

      const status = document.createElement('div');
      status.className = 'stats small';
      status.style.fontSize='12px';
      status.style.color='var(--muted)';
      status.textContent = 'Checking...';

      img.onerror = () => {
        el.classList.add('broken');
        status.textContent = 'BROKEN';
        status.style.color = '#c33';
        img.src = 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="400" height="240"><rect width="100%" height="100%" fill="%23f8d7da"/><text x="50%" y="50%" font-size="20" text-anchor="middle" fill="%23a71">Image not found</text></svg>';
      };

      img.onload = () => {
        el.classList.add('ok');
        status.textContent = 'OK';
        status.style.color = '#2a7';
      };

      el.appendChild(img);
      el.appendChild(name);
      el.appendChild(url);
      el.appendChild(status);

      return {el, item, img, status};
    }

    function updateStats(){
      const total = cards.length;
      const broken = cards.filter(c=>c.el.classList.contains('broken')).length;
      stats.textContent = `${total} countries — ${broken} broken`;
    }

    // initial render
    renderList(dataset);

    // filter
    let showOnlyBroken = false;
    q.addEventListener('input', e => {
      const v = e.target.value.trim().toLowerCase();
      const filtered = dataset.filter(d => d.country.toLowerCase().includes(v));
      renderList(filtered);
    });

    showBrokenBtn.addEventListener('click', ()=>{
      showOnlyBroken = !showOnlyBroken;
      showBrokenBtn.textContent = showOnlyBroken ? 'Show all' : 'Show only broken';
      if(showOnlyBroken){
        const broken = cards.filter(c=>c.el.classList.contains('broken')).map(c=>c.item);
        renderList(broken.length?broken:[]);
      } else {
        renderList(dataset);
      }
    });

    refreshBtn.addEventListener('click', ()=>{
      // re-trigger image loading by resetting src
      cards.forEach(c=>{
        c.el.classList.remove('broken','ok');
        c.status.textContent = 'Checking...';
        const original = c.item.flag;
        c.img.src = '';
        // small delay prevents some browsers from using cache incorrectly when resetting src
        setTimeout(()=>{ c.img.src = original; }, 20);
      });
      setTimeout(updateStats, 1200);
    });

    // update stats occasionally because image loading is async
    setInterval(updateStats, 700);
  </script>
</body>
</html>
